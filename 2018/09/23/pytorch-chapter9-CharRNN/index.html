<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>pytorch chapter9 CharRNN | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="前言本文主要是针对陈云的PyTorch入门与实践的第八章的内容进行复现，准确地说，是看着他写的代码，自己再实现一遍，所以更多地是在讲解实现过程中遇到的问题或者看到的好的方法，而不是针对论文的原理的进行讲解。对于原理，也只是会一笔带过。原理篇暂时不准备留坑，因为原理是个玄学。这是我的代码大神链接：https:&#x2F;&#x2F;github.com&#x2F;anishathalye&#x2F;neural-style这是论文作者写的">
<meta property="og:type" content="article">
<meta property="og:title" content="pytorch chapter9 CharRNN">
<meta property="og:url" content="http://example.com/2018/09/23/pytorch-chapter9-CharRNN/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="前言本文主要是针对陈云的PyTorch入门与实践的第八章的内容进行复现，准确地说，是看着他写的代码，自己再实现一遍，所以更多地是在讲解实现过程中遇到的问题或者看到的好的方法，而不是针对论文的原理的进行讲解。对于原理，也只是会一笔带过。原理篇暂时不准备留坑，因为原理是个玄学。这是我的代码大神链接：https:&#x2F;&#x2F;github.com&#x2F;anishathalye&#x2F;neural-style这是论文作者写的">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2018-09-23T15:04:12.000Z">
<meta property="article:modified_time" content="2018-11-05T09:21:35.883Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="numpy">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-pytorch-chapter9-CharRNN" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/09/23/pytorch-chapter9-CharRNN/" class="article-date">
  <time class="dt-published" datetime="2018-09-23T15:04:12.000Z" itemprop="datePublished">2018-09-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/pytorch/">pytorch</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      pytorch chapter9 CharRNN
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文主要是针对陈云的PyTorch入门与实践的第八章的内容进行复现，准确地说，是看着他写的代码，自己再实现一遍，所以更多地是在讲解实现过程中遇到的问题或者看到的好的方法，而不是针对论文的原理的进行讲解。对于原理，也只是会一笔带过。原理篇暂时不准备留坑，因为原理是个玄学。<br>这是我的<a target="_blank" rel="noopener" href="https://github.com/TJJTJJTJJ/pytorch__learn">代码</a><br>大神链接：<a target="_blank" rel="noopener" href="https://github.com/anishathalye/neural-style">https://github.com/anishathalye/neural-style</a><br>这是论文作者写的</p>
<span id="more"></span>
<hr>
<h1 id="问题及其思考"><a href="#问题及其思考" class="headerlink" title="问题及其思考"></a>问题及其思考</h1><h2 id="data是鸭子类型"><a href="#data是鸭子类型" class="headerlink" title="data是鸭子类型"></a>data是鸭子类型</h2><p>因为data作为tensor，已经实现了__getitem__和__len__方法，可以被DataLoader加载。<br>或者说，只要能类似鸭子就可以，这方面掌握得还不熟悉。</p>
<h2 id="LSTM的输入"><a href="#LSTM的输入" class="headerlink" title="LSTM的输入"></a>LSTM的输入</h2><p>作者明确提出，LSTM的输入类型是(seq_len, batch_size, embedding_dim)，除去embedding_dim，就是(seq_len, batch_size)，原因很简单，LSTM是每次输入一个字，输出一个字，那么输入就是x[0]，对于图像，x[0]就是一张图片，那么对于文字，x[0]也应该就是一个字。好吧，还是说不通，等以后看了相关资料说不定才能理解。</p>
<h2 id="代码编写"><a href="#代码编写" class="headerlink" title="代码编写"></a>代码编写</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># 变成列表，方便后续的操作，因为start_words的每个字用过之后就没用了，</span><br><span class="line"># 用pop不行,因为对于空列表会报错,用None作为结尾标志。可以看出，如果我们想让某个序列正常退出，可以通过设置特殊的结尾来实现。</span><br><span class="line"># 这一段的逻辑有点乱，因为prefix_words可能没有，所以对于start_words，必须先进行一个模型生成。</span><br><span class="line"># 对于或有或无的perfix_words，为了消除其存在对代码和思路的影响，应该保证prefix_words前后的代码状态不变，即</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">第一种</span><br><span class="line">这种保证了output,hidden的状态不变</span><br><span class="line">output, hidden = model(input, hidden)</span><br><span class="line"></span><br><span class="line"># step： 对prefix_words进行输入</span><br><span class="line">prefix_words = &#x27;&#x27; if prefix_words==None else prefix_words    </span><br><span class="line">for word in prefix_words:</span><br><span class="line">    input = input.data.new(word2ix[word]).view(1,1)</span><br><span class="line">    output, hidden = model(input, hidden)</span><br><span class="line">    </span><br><span class="line">for i in range(opt.max_gen_len-1):</span><br><span class="line">    top_index = output[0].topk(1)[1][0].item()    </span><br><span class="line">    ...</span><br><span class="line">    output, hidden = model(input, hidden)</span><br><span class="line"></span><br><span class="line">第二种</span><br><span class="line">这种保证了input的状态不变</span><br><span class="line">for word in prefix_words:</span><br><span class="line">    output, hidden = model(input, hidden)</span><br><span class="line">    input = (input.data.new([word2ix[word]])).view(1, 1)</span><br><span class="line"></span><br><span class="line">for i in range(opt.max_gen_len):</span><br><span class="line">    output, hidden = model(input, hidden)</span><br><span class="line">    top_index = output.data[0].topk(1)[1][0].item()</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">决定采用第二种，因为代码的主体思路是for i in range(opt.max_gen_len)，prefix_word是插入部分，是可有可无部分。</span><br><span class="line">第一种会造成 top_index与model的切分，不利于后期分析。</span><br><span class="line">或者说，以后碰到这种类型的代码，可以直接跳过中间部分，对后面进行分析。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="os-walk-amp-amp-os-listdir"><a href="#os-walk-amp-amp-os-listdir" class="headerlink" title="os.walk()  &amp;&amp; os.listdir()"></a>os.walk()  &amp;&amp; os.listdir()</h2><h3 id="os-walk"><a href="#os-walk" class="headerlink" title="os.walk()"></a>os.walk()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">6</span>]: <span class="keyword">for</span> i,j,k <span class="keyword">in</span> os.walk(<span class="string">&#x27;./&#x27;</span>):</span><br><span class="line">   ...:     <span class="built_in">print</span>(i)</span><br><span class="line">./</span><br><span class="line">./b</span><br><span class="line">./a</span><br><span class="line">./a/aa2</span><br><span class="line">./a/aa1</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: <span class="keyword">for</span> i,j,k <span class="keyword">in</span> os.walk(<span class="string">&#x27;./&#x27;</span>):</span><br><span class="line">   ...:     <span class="built_in">print</span>(j)   </span><br><span class="line">[<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>]</span><br><span class="line">[]</span><br><span class="line">[<span class="string">&#x27;aa2&#x27;</span>, <span class="string">&#x27;aa1&#x27;</span>]</span><br><span class="line">[]</span><br><span class="line">[]</span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: <span class="keyword">for</span> i,j,k <span class="keyword">in</span> os.walk(<span class="string">&#x27;./&#x27;</span>):</span><br><span class="line">   ...:     <span class="built_in">print</span>(k)</span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;cc&#x27;</span>, <span class="string">&#x27;bb&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;aa&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;bbb&#x27;</span>]</span><br><span class="line">[]</span><br><span class="line"></span><br><span class="line">i+k即可</span><br></pre></td></tr></table></figure>
<p>os.walk()返回的是当前文件夹下所有的可遍历的文件夹，生成的生成器，i表示文件夹，j表示i文件夹下的文件夹，k表示i文件夹下的文件。以上是os.walk的for用法，下面是直接的用法。对于文件访问，直接i+k，对于文件夹访问，i+j即可。</p>
<h3 id="os-listdir"><a href="#os-listdir" class="headerlink" title="os.listdir()"></a>os.listdir()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">17</span>]: aa = os.walk(<span class="string">&#x27;./&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">18</span>]: bb = <span class="built_in">list</span>(aa)</span><br><span class="line"></span><br><span class="line">In [<span class="number">19</span>]: bb</span><br><span class="line">Out[<span class="number">19</span>]: </span><br><span class="line">[(<span class="string">&#x27;./&#x27;</span>, [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>], [<span class="string">&#x27;1&#x27;</span>]),</span><br><span class="line"> (<span class="string">&#x27;./b&#x27;</span>, [], [<span class="string">&#x27;cc&#x27;</span>, <span class="string">&#x27;bb&#x27;</span>]),</span><br><span class="line"> (<span class="string">&#x27;./a&#x27;</span>, [<span class="string">&#x27;aa2&#x27;</span>, <span class="string">&#x27;aa1&#x27;</span>], [<span class="string">&#x27;aa&#x27;</span>]),</span><br><span class="line"> (<span class="string">&#x27;./a/aa2&#x27;</span>, [], [<span class="string">&#x27;bbb&#x27;</span>]),</span><br><span class="line"> (<span class="string">&#x27;./a/aa1&#x27;</span>, [], [])]</span><br></pre></td></tr></table></figure>
<p>不知道为什么这里不能直接用 aa,bb,cc &#x3D; os.walk(‘.&#x2F;‘)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">22</span>]: <span class="keyword">for</span> ii <span class="keyword">in</span> os.listdir(<span class="string">&#x27;./&#x27;</span>):</span><br><span class="line">    ...:     <span class="built_in">print</span>(ii)</span><br><span class="line">    ...:     </span><br><span class="line"><span class="number">1</span></span><br><span class="line">b</span><br><span class="line">a</span><br><span class="line">In [<span class="number">23</span>]: aa = os.listdir(<span class="string">&#x27;./&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">24</span>]: aa</span><br><span class="line">Out[<span class="number">24</span>]: [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>os.listdir()返回的是当前文件夹下的文件夹或者文件。<br>现在碰到的情况是文件夹排列有序，直接访问文件，所以os.list()就可以了。<br>对应的就是</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> os.listdir(src):</span><br><span class="line">      path = os.path.join(src,filename)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="小发现"><a href="#小发现" class="headerlink" title="小发现"></a>小发现</h2><ul>
<li>刚刚发现github上的chinese中的某个文件夹是一个新的github文件。这是个啥情况</li>
<li>python 可以在函数内部定义函数，是局部域，不能被外界访问，很好，这样就相当于说明了哪些函数是为哪些函数服务的。</li>
</ul>
<hr>
<h2 id="json数据格式的读取"><a href="#json数据格式的读取" class="headerlink" title="json数据格式的读取"></a>json数据格式的读取</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">25</span>]: <span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">In [<span class="number">26</span>]: s = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;ACME&quot;</span>, <span class="string">&quot;shares&quot;</span>: <span class="number">50</span>, <span class="string">&quot;price&quot;</span>: <span class="number">490.1</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">27</span>]: json_str = json.dumps(s)</span><br><span class="line"></span><br><span class="line">In [<span class="number">28</span>]: json_str.__class__</span><br><span class="line">Out[<span class="number">28</span>]: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">29</span>]: json_str</span><br><span class="line">Out[<span class="number">29</span>]: <span class="string">&#x27;&#123;&quot;name&quot;: &quot;ACME&quot;, &quot;shares&quot;: 50, &quot;price&quot;: 490.1&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">33</span>]: ss = json.loads(json_str)</span><br><span class="line"></span><br><span class="line">In [<span class="number">34</span>]: ss</span><br><span class="line">Out[<span class="number">34</span>]: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;ACME&#x27;</span>, <span class="string">&#x27;shares&#x27;</span>: <span class="number">50</span>, <span class="string">&#x27;price&#x27;</span>: <span class="number">490.1</span>&#125;</span><br></pre></td></tr></table></figure>
<h2 id="json文件的读取"><a href="#json文件的读取" class="headerlink" title="json文件的读取"></a>json文件的读取</h2><p>第一种:此时data里是该文件内的全部数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(file,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br></pre></td></tr></table></figure>
<p>第二种：此时data也是该文件内的全部数据，open(file).read()表示读取数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = json.loads(<span class="built_in">open</span>(file).read())</span><br></pre></td></tr></table></figure>
<p>显然第一种安全，第二种还需要显示地关闭文件<br>可以使用pprint来打印data，好看</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pprint <span class="keyword">import</span> pprint </span><br><span class="line">pprint data</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p>普通字符和11个元字符：<br>.  匹配任意除换行符”\n”外的字符(在DOTALL模式中也能匹配换行符 a.c<br>\  转义字符，使后一个字符改变原来的意思<br>*  匹配前一个字符0或多次<br>+  匹配前一个字符1次或无限次<br>?  匹配一个字符0次或1次<br>^  匹配字符串开头。在多行模式中匹配每一行的开头<br>$  匹配字符串末尾，在多行模式中匹配每一行的末尾<br>|  或。匹配|左右表达式任意一个，从左到右匹配，如果|没有包括在()中，则它的范围是整个正则表达式<br>{} {m}匹配前一个字符m次，{m,n}匹配前一个字符m至n次，若省略n，则匹配m至无限次<br>[] 字符集。对应的位置可以是字符集中任意字符。字符集中的字符可以逐个列出，也可以给出范围，如[abc]或[a-c]。[^abc]表示取反，即非abc。<br>所有特殊字符在字符集中都失去其原有的特殊含义。用\反斜杠转义恢复特殊字符的特殊含义。<br>()表达式作为一个整体，可以后接数量词。表达式中的|仅在该组中有效。<br>print re.split(r”;|,|?“, line1)<br>print re.split(r”[;,?]”, line1)<br>print re.split(r”\W+”, line)<br>不知道为什么</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">para = <span class="string">&#x27;-181-欲出未出光辣达，[千山]万山[如火]发（哈哈哈大笑）。须臾[走向][天上]&#x27;</span></span><br><span class="line">re.subn(<span class="string">&#x27;[\d-]&#x27;</span>,<span class="string">&#x27;&#x27;</span>,para)</span><br><span class="line">(<span class="string">&#x27;欲出未出光辣达，[千山]万山[如火]发（哈哈哈大笑）。须臾[走向][天上]&#x27;</span>, <span class="number">5</span>)</span><br><span class="line">re.subn(<span class="string">&#x27;[\d-]*&#x27;</span>,<span class="string">&#x27;&#x27;</span>,para)</span><br><span class="line">(<span class="string">&#x27;欲出未出光辣达，[千山]万山[如火]发（哈哈哈大笑）。须臾[走向][天上]&#x27;</span>, <span class="number">38</span>)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="list越界与切片"><a href="#list越界与切片" class="headerlink" title="list越界与切片"></a>list越界与切片</h2><p>list不能越界索引访问，但是对于切片，切片是会自动匹配长度的，所以使用slice不需要担心越界问题。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">s[<span class="number">8</span>] <span class="comment"># 报错</span></span><br><span class="line">s[<span class="number">1</span>] == <span class="number">1</span></span><br><span class="line">s[:<span class="number">1</span>] == [<span class="number">1</span>]</span><br><span class="line">s[<span class="number">1</span>:<span class="number">10</span>] <span class="comment"># return s[1:3]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>索引位置返回的是元素的副本<br>切片返回的是list的副本</p>
<hr>
<h2 id="嵌套列表压平"><a href="#嵌套列表压平" class="headerlink" title="嵌套列表压平"></a>嵌套列表压平</h2><p>func &#x3D; lambda x: [y for l in x for y in l] if type(x) is list else [x]</p>
<hr>
<h2 id="tuple的连接"><a href="#tuple的连接" class="headerlink" title="tuple的连接"></a>tuple的连接</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>,<span class="number">2</span>)+(<span class="number">3</span>,<span class="number">4</span>) == (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="comment"># 定义只有一个数字的tuple，避免函数歧义</span></span><br><span class="line">t = (<span class="number">1</span>,)</span><br></pre></td></tr></table></figure>
<h2 id="求list的size"><a href="#求list的size" class="headerlink" title="求list的size"></a>求list的size</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">li = [[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line">tu = np.asarray(li).shape</span><br><span class="line"><span class="comment"># shape返回的是tuple型，可以直接拼接</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="异常触发"><a href="#异常触发" class="headerlink" title="异常触发"></a>异常触发</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ospider/p/5267766.html">参考链接</a><a target="_blank" rel="noopener" href="http://www.runoob.com/python/python-exceptions.html">http://www.runoob.com/python/python-exceptions.html</a><br>等总结的时候尝试一下<br>分为捕捉异常和触发异常</p>
<h3 id="捕捉异常"><a href="#捕捉异常" class="headerlink" title="捕捉异常"></a>捕捉异常</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 捕捉异常第一种 try/except语句</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">&lt;语句&gt;        <span class="comment">#运行别的代码</span></span><br><span class="line"><span class="keyword">except</span> &lt;名字&gt;：</span><br><span class="line">&lt;语句&gt;        <span class="comment">#如果在try部份引发了&#x27;name&#x27;异常</span></span><br><span class="line"><span class="keyword">except</span> &lt;名字&gt;，&lt;数据&gt;:</span><br><span class="line">&lt;语句&gt;        <span class="comment">#如果引发了&#x27;name&#x27;异常，获得附加的数据</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">&lt;语句&gt;        <span class="comment">#如果没有异常发生</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 捕捉异常第二种 try/finally</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">&lt;语句&gt;</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">&lt;语句&gt;    <span class="comment">#退出try时总会执行</span></span><br><span class="line"><span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例1</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"> </span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;myfile.txt&#x27;</span>)</span><br><span class="line">    s = f.readline()</span><br><span class="line">    i = <span class="built_in">int</span>(s.strip())</span><br><span class="line"><span class="keyword">except</span> OSError <span class="keyword">as</span> err:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OS error: &#123;0&#125;&quot;</span>.<span class="built_in">format</span>(err))</span><br><span class="line"><span class="keyword">except</span> ValueError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Could not convert data to an integer.&quot;</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Unexpected error:&quot;</span>, sys.exc_info()[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例2</span></span><br><span class="line">如果你只想知道这是否抛出了一个异常，并不想去处理它，那么一个简单的 <span class="keyword">raise</span> 语句就可以再次把它抛出。</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> NameError(<span class="string">&#x27;HiThere&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> NameError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;An exception flew by!&#x27;</span>)</span><br><span class="line">    <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例3</span></span><br><span class="line">处理有参数的异常</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">temp_convert</span>(<span class="params">var</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">int</span>(var)</span><br><span class="line">    <span class="keyword">except</span> (ValueError) <span class="keyword">as</span> Argument:</span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&quot;参数没有包含数字\n&quot;</span>, Argument)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">temp_convert(<span class="string">&quot;xyz&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 捕捉异常共同使用</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    fh = <span class="built_in">open</span>(<span class="string">&quot;testfile&quot;</span>, <span class="string">&quot;w&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        fh.write(<span class="string">&quot;这是一个测试文件，用于测试异常!!&quot;</span>)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;关闭文件&quot;</span></span><br><span class="line">        fh.close()</span><br><span class="line"><span class="keyword">except</span> IOError:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Error: 没有找到文件或读取文件失败&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注</span></span><br><span class="line"><span class="keyword">except</span> (RuntimeError, TypeError, NameError):</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="触发异常"><a href="#触发异常" class="headerlink" title="触发异常"></a>触发异常</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 函数触发异常</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">functionName</span>(<span class="params"> level </span>):</span><br><span class="line">    <span class="keyword">if</span> level &lt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&quot;Invalid level!&quot;</span>, level)</span><br><span class="line">        <span class="comment"># 触发异常后，后面的代码就不会再执行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 捕捉异常和触发异常的配合</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mye</span>(<span class="params"> level </span>):</span><br><span class="line">    <span class="keyword">if</span> level &lt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&quot;Invalid level!&quot;</span>)</span><br><span class="line">        <span class="comment"># 触发异常后，后面的代码就不会再执行</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    mye(<span class="number">0</span>)            <span class="comment"># 触发异常</span></span><br><span class="line"><span class="keyword">except</span> Exception:</span><br><span class="line">    <span class="built_in">print</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<h3 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;<span class="keyword">class</span> <span class="title class_">MyError</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value</span>):</span><br><span class="line">            self.value = value</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">repr</span>(self.value)</span><br><span class="line">   </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">raise</span> MyError(<span class="number">2</span>*<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">except</span> MyError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;My exception occurred, value:&#x27;</span>, e.value)</span><br><span class="line">   </span><br></pre></td></tr></table></figure>
<hr>
<h2 id="list的更新"><a href="#list的更新" class="headerlink" title="list的更新"></a>list的更新</h2><p>更新分为逐元素更新和逐列表更新</p>
<h3 id="逐元素更新"><a href="#逐元素更新" class="headerlink" title="逐元素更新"></a>逐元素更新</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list的逐元素更新</span></span><br><span class="line">li = [] </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    li.append(i)</span><br><span class="line"><span class="comment"># 对于空列表，等价于</span></span><br><span class="line">li = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"><span class="comment"># 或者等价于generator</span></span><br><span class="line">li = (i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="comment"># 或者转化为逐列表更新,常用与列表头和列表尾同时更新</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    li=[i]+li+[i+<span class="number">11</span>]</span><br><span class="line"><span class="comment"># 或者对于已经得到的元素</span></span><br><span class="line">[a,b,c]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>即对于一个空列表的append，我们总是可以将其转化成列表推导式，<br>并且对于dict和set，只需要将中括号换成大括号即可</p>
<h3 id="逐列表更新"><a href="#逐列表更新" class="headerlink" title="逐列表更新"></a>逐列表更新</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list的逐列表更新</span></span><br><span class="line">li = []</span><br><span class="line">ll = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ll:</span><br><span class="line">    li.extend(i)</span><br><span class="line">li</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="comment"># 或者对于有限个列表</span></span><br><span class="line">c = a+b</span><br></pre></td></tr></table></figure>
<p>注：append()和extend()和+&#x3D;都是在原有列表增加，+是生成一个新的列表<br>感觉逐列表更新应该可以更优美.</p>
<h2 id="os-path-join"><a href="#os-path-join" class="headerlink" title="os.path.join()"></a>os.path.join()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">42</span>]: <span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">In [<span class="number">43</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;bbbb&#x27;</span>,<span class="string">&#x27;ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: aaaa/bbbb/ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">44</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;/aaaa&#x27;</span>,<span class="string">&#x27;bbbb&#x27;</span>,<span class="string">&#x27;ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: /aaaa/bbbb/ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">45</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;/bbbb&#x27;</span>,<span class="string">&#x27;ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: /bbbb/ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">46</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;bbbb&#x27;</span>,<span class="string">&#x27;/ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: /ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">47</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;/bbbb&#x27;</span>,<span class="string">&#x27;/ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: /ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">48</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;./bbbb&#x27;</span>,<span class="string">&#x27;ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: aaaa/./bbbb/ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">49</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;../bbbb&#x27;</span>,<span class="string">&#x27;ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: aaaa/../bbbb/ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">50</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;bbbb&#x27;</span>,<span class="string">&#x27;./ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: aaaa/bbbb/./ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">51</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;bbbb&#x27;</span>,<span class="string">&#x27;../ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: aaaa/bbbb/../ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">54</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;/bbbb&#x27;</span>,<span class="string">&#x27;....../ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: /bbbb/....../ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">55</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;bbbb/&#x27;</span>,<span class="string">&#x27;ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: aaaa/bbbb/ccccc.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">57</span>]: <span class="built_in">print</span>(<span class="string">&quot;1:&quot;</span>,os.path.join(<span class="string">&#x27;aaaa&#x27;</span>,<span class="string">&#x27;bbbb\\&#x27;</span>,<span class="string">&#x27;ccccc.txt&#x27;</span>))</span><br><span class="line"><span class="number">1</span>: aaaa/bbbb\/ccccc.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>对os.path.join()总结如下：从后往前，遇到绝对路径，则绝对路径前面的元素丢弃，遇到类似’…&#x2F;‘，则将其看成一个普通的路径名字，而对于&#x2F;在末尾的，会自动根据情况补充。</p>
<h2 id="list-和-的区别，字符串分割成单个字符"><a href="#list-和-的区别，字符串分割成单个字符" class="headerlink" title="list()和[]的区别，字符串分割成单个字符"></a>list()和[]的区别，字符串分割成单个字符</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">58</span>]: <span class="built_in">list</span>(<span class="string">&#x27;abcd&#x27;</span>)</span><br><span class="line">Out[<span class="number">58</span>]: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">59</span>]: [<span class="string">&#x27;abcd&#x27;</span>]</span><br><span class="line">Out[<span class="number">59</span>]: [<span class="string">&#x27;abcd&#x27;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">61</span>]: aa = (<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">62</span>]: <span class="built_in">list</span>(aa)</span><br><span class="line">Out[<span class="number">62</span>]: [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">63</span>]: [aa]</span><br><span class="line">Out[<span class="number">63</span>]: [(<span class="number">1</span>, <span class="number">2</span>)]</span><br><span class="line"></span><br><span class="line">In [<span class="number">65</span>]: bb = [<span class="string">&#x27;abc&#x27;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">66</span>]: <span class="built_in">list</span>(*bb)</span><br><span class="line">Out[<span class="number">66</span>]: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&#x27;abcd&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<p>即，list()会拆解输入值，拼接成list，可以用在’abcd’这样的字符串直接拆成’a’,’b’,’c’,’d’这样的形式，因为re.split不支持这种拆分法。当然，如果只是单纯地逐元素访问并逐元素地进行操作，我们可以使用for i in ‘abcd’:这样的访问。<br>也可以认为是’’.join()的逆操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">65</span>]: bb = [<span class="string">&#x27;abc&#x27;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">66</span>]: <span class="built_in">list</span>(*bb)</span><br><span class="line">Out[<span class="number">66</span>]: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">71</span>]: <span class="string">&#x27;&#x27;</span>.join(<span class="built_in">list</span>(bb))</span><br><span class="line">Out[<span class="number">71</span>]: <span class="string">&#x27;abc&#x27;</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="list、dict和numpy的互相转换"><a href="#list、dict和numpy的互相转换" class="headerlink" title="list、dict和numpy的互相转换"></a>list、dict和numpy的互相转换</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">74</span>]: c = np.array(&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>&#125;)</span><br><span class="line">In [<span class="number">75</span>]: c[<span class="number">0</span>]</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">IndexError                                Traceback (most recent call last)</span><br><span class="line">&lt;ipython-<span class="built_in">input</span>-<span class="number">75</span>-71463270cd6c&gt; <span class="keyword">in</span> &lt;module&gt;()</span><br><span class="line">----&gt; <span class="number">1</span> c[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">IndexError: too many indices <span class="keyword">for</span> array</span><br><span class="line"></span><br><span class="line">In [<span class="number">77</span>]: c</span><br><span class="line">Out[<span class="number">77</span>]: array(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;, dtype=<span class="built_in">object</span>)</span><br><span class="line">In [<span class="number">79</span>]: c.tolist()</span><br><span class="line">Out[<span class="number">79</span>]: &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">80</span>]: d = c.tolist()</span><br><span class="line"></span><br><span class="line">In [<span class="number">81</span>]: d.__class__</span><br><span class="line">Out[<span class="number">81</span>]: <span class="built_in">dict</span></span><br></pre></td></tr></table></figure>

<h2 id="shell的基础教程"><a href="#shell的基础教程" class="headerlink" title="shell的基础教程"></a>shell的基础教程</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for fff in `ls *.json`</span><br><span class="line">do</span><br><span class="line">cconv -f utf8-tw  -t UTF8-CN $fff  -o simplified/$fff</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">for skill in Ada Coffe Action Java; do</span><br><span class="line">    echo &quot;I am good at $&#123;skill&#125;Script&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="shell-传递参数"><a href="#shell-传递参数" class="headerlink" title="shell 传递参数"></a>shell 传递参数</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">author:菜鸟教程</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">url:www.runoob.com</span></span><br><span class="line"></span><br><span class="line">echo &quot;Shell 传递参数实例！&quot;;</span><br><span class="line">echo &quot;执行的文件名：$0&quot;;</span><br><span class="line">echo &quot;第一个参数为：$1&quot;;</span><br><span class="line">echo &quot;第二个参数为：$2&quot;;</span><br><span class="line">echo &quot;第三个参数为：$3&quot;;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> +x test.sh</span> </span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./test.sh 1 2 3</span></span><br><span class="line">Shell 传递参数实例！</span><br><span class="line">执行的文件名：./test.sh</span><br><span class="line">第一个参数为：1</span><br><span class="line">第二个参数为：2</span><br><span class="line">第三个参数为：3</span><br></pre></td></tr></table></figure>
<h3 id="shell-流程控制"><a href="#shell-流程控制" class="headerlink" title="shell 流程控制"></a>shell 流程控制</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if condition1</span><br><span class="line">then</span><br><span class="line">    command1</span><br><span class="line">elif condition2 </span><br><span class="line">then </span><br><span class="line">    command2</span><br><span class="line">else</span><br><span class="line">    commandN</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h3 id="Shell-输入-x2F-输出重定向"><a href="#Shell-输入-x2F-输出重定向" class="headerlink" title="Shell 输入&#x2F;输出重定向"></a>Shell 输入&#x2F;输出重定向</h3><p>命令	                       说明<br>command &gt; file	将输出重定向到 file。<br>command &lt; file	将输入重定向到 file。<br>command &gt;&gt; file	将输出以追加的方式重定向到 file。<br>n &gt; file	将文件描述符为 n 的文件重定向到 file。<br>n &gt;&gt; file	将文件描述符为 n 的文件以追加的方式重定向到 file。<br>n &gt;&amp; m	将输出文件 m 和 n 合并。<br>n &lt;&amp; m	将输入文件 m 和 n 合并。<br>&lt;&lt; tag	将开始标记 tag 和结束标记 tag 之间的内容作为输入。<br>需要注意的是文件描述符 0 通常是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果希望 stderr 重定向到 file，可以这样写：</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> 2 &gt; file</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果希望将 stdout 和 stderr 合并后重定向到 file</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &gt; file 2&gt;&amp;1</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &gt;&gt; file 2&gt;&amp;1</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果希望对 stdin 和 stdout 都重定向</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">command</span> &lt; file1 &gt;file2</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Here Document 是 Shell 中的一种特殊的重定向方式，用来将输入重定向到一个交互式 Shell 脚本或程序。</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">wc</span> -l &lt;&lt; <span class="string">EOF</span></span></span><br><span class="line">    欢迎来到</span><br><span class="line">    菜鸟教程</span><br><span class="line">    www.runoob.com</span><br><span class="line">EOF</span><br><span class="line">3          # 输出结果为 3 行</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null：</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">command &gt; /dev/null</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">如果希望屏蔽 stdout 和 stderr，可以这样写：</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="string">command &gt; /dev/null 2&gt;&amp;1</span></span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="str-split-‘’"><a href="#str-split-‘’" class="headerlink" title="str.split(‘’)"></a>str.split(‘’)</h2><p>以列表形式返回</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">label_dim = <span class="string">&#x27;16803+100&#x27;</span></span><br><span class="line">cc = label_dim.split(<span class="string">&#x27;+&#x27;</span>)</span><br><span class="line">cc</span><br><span class="line">[<span class="string">&#x27;16803&#x27;</span>,<span class="string">&#x27;100&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scales_tr = <span class="string">&#x27;20,20--20,20&#x27;</span></span><br><span class="line">scale = [<span class="built_in">map</span>(<span class="built_in">int</span>, x.split(<span class="string">&#x27;,&#x27;</span>)) <span class="keyword">for</span> x <span class="keyword">in</span> scales_tr.split(<span class="string">&#x27;--&#x27;</span>)]</span><br><span class="line">scale</span><br><span class="line">[&lt;<span class="built_in">map</span> at <span class="number">0x7fd798714748</span>&gt;, &lt;<span class="built_in">map</span> at <span class="number">0x7fd798714588</span>&gt;]</span><br><span class="line"><span class="built_in">list</span>(scale[<span class="number">0</span>])</span><br><span class="line">[<span class="number">20</span>,<span class="number">20</span>]</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="tensor的拼接-t-cat-t-stack"><a href="#tensor的拼接-t-cat-t-stack" class="headerlink" title="tensor的拼接 t.cat t.stack"></a>tensor的拼接 t.cat t.stack</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">result = []</span><br><span class="line"><span class="keyword">for</span> ii <span class="keyword">in</span> index:</span><br><span class="line"><span class="comment"># tensor的截取与合并  cat, stack,cat+view=stack,stack 新增维度进行合并</span></span><br><span class="line">    result.append(fake_img.data[ii])</span><br><span class="line">tv.utils.save_image(t.stack(result), opt.gen_img, normalize=<span class="literal">True</span>, <span class="built_in">range</span>=(-<span class="number">1</span>,<span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<h2 id="tensor-view"><a href="#tensor-view" class="headerlink" title="tensor.view()"></a>tensor.view()</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = x.view(x.size(<span class="number">0</span>),-<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">x = x.view(x.size()[<span class="number">0</span>],-<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Inception-V3"><a href="#Inception-V3" class="headerlink" title="Inception-V3"></a>Inception-V3</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ospider/p/5267766.html">参考链接</a><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/3bbf0675cfce">https://www.jianshu.com/p/3bbf0675cfce</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/loveliuzz/article/details/79135583">https://blog.csdn.net/loveliuzz/article/details/79135583</a><br>其中都有一些错误，还需要看着源码纠正一下。</p>
<hr>
<h2 id="python-文件IO"><a href="#python-文件IO" class="headerlink" title="python 文件IO"></a>python 文件IO</h2><p>python中的三个读read(),readline()和readlines()<br>.read() 每次读取整个文件，它通常用于将文件内容放到一个字符串变量中，然而 .read() 生成文件内容最直接的字符串表示，但对于连续的面向行的处理，它却是不必要的<br>.readlines()之间的差异是后者一次读取整个文件，象 .read()一样。.readlines()自动将文件内容分析成一个行的列表，该列表可以由 Python 的 for… in … 结构进行处理<br>.readline()每次只读取一行</p>
<h2 id="python打开多个文件"><a href="#python打开多个文件" class="headerlink" title="python打开多个文件"></a>python打开多个文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> a, <span class="built_in">open</span>(<span class="string">&#x27;b.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> b:</span><br><span class="line">    <span class="built_in">print</span>(a.read())</span><br><span class="line">    <span class="built_in">print</span>(b.read())</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">open_many</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, files=<span class="literal">None</span>, mode=<span class="string">&#x27;r&#x27;</span></span>):</span><br><span class="line">        <span class="keyword">if</span> files <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self._files = []</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self._files = files</span><br><span class="line">        self.mode = mode</span><br><span class="line">        self.fds = []  <span class="comment"># fd is short for file descriptor</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;--&gt;enter&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> self._files:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;--&gt;opening file&#x27;</span>)</span><br><span class="line">            self.fds.append(<span class="built_in">open</span>(f, self.mode))</span><br><span class="line">        <span class="keyword">return</span> self.fds</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, traceback</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;--&gt;exit&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> fd <span class="keyword">in</span> self.fds:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;--&gt;closing file&#x27;</span>)</span><br><span class="line">            fd.close()</span><br><span class="line">        <span class="keyword">if</span> exc_type == ValueError:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;--&gt;exception: &#x27;</span> + <span class="built_in">str</span>(exc_val))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> open_many([<span class="string">&#x27;a.txt&#x27;</span>, <span class="string">&#x27;b.txt&#x27;</span>], <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> files:</span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> files:</span><br><span class="line">            <span class="built_in">print</span> f.read()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> open_many() <span class="keyword">as</span> files:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&#x27;captured&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">with</span> open_many() <span class="keyword">as</span> files:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&#x27;uncaptureable&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="python-csv"><a href="#python-csv" class="headerlink" title="python csv"></a>python csv</h2><p>在使用常规的读取文件的方法的时候，出现了问题，每一个数字包括小数点都被当成了一个字符，这样明显是不对的，对于数字的csv，要考虑下这个方法，我感觉应该和写的方式有关，待续。<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ospider/p/5267766.html">参考链接</a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dmir/p/5009075.html">https://www.cnblogs.com/dmir/p/5009075.html</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(path) <span class="keyword">as</span> f:</span><br><span class="line">    f_csv = csv.reader(f)</span><br><span class="line">    headers = <span class="built_in">next</span>(f_csv)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> f_csv:</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">csv_data = pd.read_csv(path)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="优化器"><a href="#优化器" class="headerlink" title="优化器"></a>优化器</h2><p>优化器与模型参数完全共享内存，一个改变，另一个会立即跟着改变。<br>不能重复加载同一个参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一种</span></span><br><span class="line">optimizer = t.optim.Adam(model.parameters(), lr = <span class="number">0.1</span>)</span><br><span class="line">optimizer</span><br><span class="line"></span><br><span class="line">Adam (</span><br><span class="line">Parameter Group <span class="number">0</span></span><br><span class="line">    amsgrad: <span class="literal">False</span></span><br><span class="line">    betas: (<span class="number">0.9</span>, <span class="number">0.999</span>)</span><br><span class="line">    eps: <span class="number">1e-08</span></span><br><span class="line">    lr: <span class="number">0.1</span></span><br><span class="line">    weight_decay: <span class="number">0</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> optimizer.param_groups:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;______&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">&#123;<span class="string">&#x27;params&#x27;</span>: [Parameter containing:</span><br><span class="line">tensor([[[[ <span class="number">0.0493</span>,  <span class="number">0.1696</span>,  <span class="number">0.0647</span>],</span><br><span class="line">          [ <span class="number">0.1935</span>,  <span class="number">0.3102</span>, -<span class="number">0.0871</span>],</span><br><span class="line">          [-<span class="number">0.2787</span>,  <span class="number">0.0894</span>, -<span class="number">0.0438</span>]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        [[[-<span class="number">0.2671</span>,  <span class="number">0.2079</span>,  <span class="number">0.2474</span>],</span><br><span class="line">          [ <span class="number">0.2068</span>, -<span class="number">0.1825</span>,  <span class="number">0.1427</span>],</span><br><span class="line">          [-<span class="number">0.0853</span>, -<span class="number">0.1799</span>, -<span class="number">0.2465</span>]]]]), Parameter containing:</span><br><span class="line">tensor([-<span class="number">0.3158</span>,  <span class="number">0.1429</span>]), Parameter containing:</span><br><span class="line">tensor([[[[ <span class="number">0.2063</span>,  <span class="number">0.0771</span>,  <span class="number">0.1579</span>],</span><br><span class="line">          [ <span class="number">0.1543</span>,  <span class="number">0.1374</span>, -<span class="number">0.1951</span>],</span><br><span class="line">          [-<span class="number">0.1221</span>,  <span class="number">0.0099</span>, -<span class="number">0.1331</span>]],</span><br><span class="line"></span><br><span class="line">         [[-<span class="number">0.1899</span>,  <span class="number">0.1978</span>,  <span class="number">0.1065</span>],</span><br><span class="line">          [ <span class="number">0.1400</span>, -<span class="number">0.0740</span>,  <span class="number">0.0397</span>],</span><br><span class="line">          [-<span class="number">0.2165</span>, -<span class="number">0.0180</span>,  <span class="number">0.1072</span>]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        [[[ <span class="number">0.0692</span>, -<span class="number">0.1296</span>,  <span class="number">0.0524</span>],</span><br><span class="line">          [ <span class="number">0.0577</span>, -<span class="number">0.1184</span>,  <span class="number">0.0697</span>],</span><br><span class="line">          [ <span class="number">0.0859</span>, -<span class="number">0.2086</span>,  <span class="number">0.0419</span>]],</span><br><span class="line"></span><br><span class="line">         [[-<span class="number">0.0270</span>,  <span class="number">0.1836</span>, -<span class="number">0.0649</span>],</span><br><span class="line">          [ <span class="number">0.1680</span>, -<span class="number">0.1061</span>, -<span class="number">0.2357</span>],</span><br><span class="line">          [-<span class="number">0.0408</span>,  <span class="number">0.0799</span>,  <span class="number">0.0065</span>]]]]), Parameter containing:</span><br><span class="line">tensor([ <span class="number">0.1269</span>, -<span class="number">0.1582</span>]), Parameter containing:</span><br><span class="line">tensor([[[[ <span class="number">0.0185</span>, -<span class="number">0.2579</span>, -<span class="number">0.1185</span>],</span><br><span class="line">          [ <span class="number">0.1269</span>,  <span class="number">0.0274</span>,  <span class="number">0.1019</span>],</span><br><span class="line">          [ <span class="number">0.0329</span>, -<span class="number">0.1229</span>, -<span class="number">0.1922</span>]]]]), Parameter containing:</span><br><span class="line">tensor([-<span class="number">0.2731</span>])], <span class="string">&#x27;lr&#x27;</span>: <span class="number">0.1</span>, <span class="string">&#x27;betas&#x27;</span>: (<span class="number">0.9</span>, <span class="number">0.999</span>), <span class="string">&#x27;eps&#x27;</span>: <span class="number">1e-08</span>, <span class="string">&#x27;weight_decay&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;amsgrad&#x27;</span>: <span class="literal">False</span>&#125;</span><br><span class="line">______    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># 第二种</span></span><br><span class="line">optimizer = t.optim.Adam([&#123;<span class="string">&#x27;params&#x27;</span>:model.net1.parameters(),<span class="string">&#x27;lr&#x27;</span>:<span class="number">0.4</span>&#125;,</span><br><span class="line">       &#123;<span class="string">&#x27;params&#x27;</span>:model.net2.parameters(),<span class="string">&#x27;lr&#x27;</span>:<span class="number">0.1</span>&#125;],lr=<span class="number">0.04</span>)</span><br><span class="line"></span><br><span class="line">optimizer</span><br><span class="line"></span><br><span class="line">Adam (</span><br><span class="line">Parameter Group <span class="number">0</span></span><br><span class="line">    amsgrad: <span class="literal">False</span></span><br><span class="line">    betas: (<span class="number">0.9</span>, <span class="number">0.999</span>)</span><br><span class="line">    eps: <span class="number">1e-08</span></span><br><span class="line">    lr: <span class="number">0.4</span></span><br><span class="line">    weight_decay: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">Parameter Group <span class="number">1</span></span><br><span class="line">    amsgrad: <span class="literal">False</span></span><br><span class="line">    betas: (<span class="number">0.9</span>, <span class="number">0.999</span>)</span><br><span class="line">    eps: <span class="number">1e-08</span></span><br><span class="line">    lr: <span class="number">0.1</span></span><br><span class="line">    weight_decay: <span class="number">0</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> optimizer.param_groups:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;______&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&#x27;params&#x27;</span>: [Parameter containing:</span><br><span class="line">tensor([[[[ <span class="number">0.0493</span>,  <span class="number">0.1696</span>,  <span class="number">0.0647</span>],</span><br><span class="line">          [ <span class="number">0.1935</span>,  <span class="number">0.3102</span>, -<span class="number">0.0871</span>],</span><br><span class="line">          [-<span class="number">0.2787</span>,  <span class="number">0.0894</span>, -<span class="number">0.0438</span>]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        [[[-<span class="number">0.2671</span>,  <span class="number">0.2079</span>,  <span class="number">0.2474</span>],</span><br><span class="line">          [ <span class="number">0.2068</span>, -<span class="number">0.1825</span>,  <span class="number">0.1427</span>],</span><br><span class="line">          [-<span class="number">0.0853</span>, -<span class="number">0.1799</span>, -<span class="number">0.2465</span>]]]]), Parameter containing:</span><br><span class="line">tensor([-<span class="number">0.3158</span>,  <span class="number">0.1429</span>])], <span class="string">&#x27;lr&#x27;</span>: <span class="number">0.4</span>, <span class="string">&#x27;betas&#x27;</span>: (<span class="number">0.9</span>, <span class="number">0.999</span>), <span class="string">&#x27;eps&#x27;</span>: <span class="number">1e-08</span>, <span class="string">&#x27;weight_decay&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;amsgrad&#x27;</span>: <span class="literal">False</span>&#125;</span><br><span class="line">______</span><br><span class="line">&#123;<span class="string">&#x27;params&#x27;</span>: [Parameter containing:</span><br><span class="line">tensor([[[[ <span class="number">0.2063</span>,  <span class="number">0.0771</span>,  <span class="number">0.1579</span>],</span><br><span class="line">          [ <span class="number">0.1543</span>,  <span class="number">0.1374</span>, -<span class="number">0.1951</span>],</span><br><span class="line">          [-<span class="number">0.1221</span>,  <span class="number">0.0099</span>, -<span class="number">0.1331</span>]],</span><br><span class="line"></span><br><span class="line">         [[-<span class="number">0.1899</span>,  <span class="number">0.1978</span>,  <span class="number">0.1065</span>],</span><br><span class="line">          [ <span class="number">0.1400</span>, -<span class="number">0.0740</span>,  <span class="number">0.0397</span>],</span><br><span class="line">          [-<span class="number">0.2165</span>, -<span class="number">0.0180</span>,  <span class="number">0.1072</span>]]],</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        [[[ <span class="number">0.0692</span>, -<span class="number">0.1296</span>,  <span class="number">0.0524</span>],</span><br><span class="line">          [ <span class="number">0.0577</span>, -<span class="number">0.1184</span>,  <span class="number">0.0697</span>],</span><br><span class="line">          [ <span class="number">0.0859</span>, -<span class="number">0.2086</span>,  <span class="number">0.0419</span>]],</span><br><span class="line"></span><br><span class="line">         [[-<span class="number">0.0270</span>,  <span class="number">0.1836</span>, -<span class="number">0.0649</span>],</span><br><span class="line">          [ <span class="number">0.1680</span>, -<span class="number">0.1061</span>, -<span class="number">0.2357</span>],</span><br><span class="line">          [-<span class="number">0.0408</span>,  <span class="number">0.0799</span>,  <span class="number">0.0065</span>]]]]), Parameter containing:</span><br><span class="line">tensor([ <span class="number">0.1269</span>, -<span class="number">0.1582</span>]), Parameter containing:</span><br><span class="line">tensor([[[[ <span class="number">0.0185</span>, -<span class="number">0.2579</span>, -<span class="number">0.1185</span>],</span><br><span class="line">          [ <span class="number">0.1269</span>,  <span class="number">0.0274</span>,  <span class="number">0.1019</span>],</span><br><span class="line">          [ <span class="number">0.0329</span>, -<span class="number">0.1229</span>, -<span class="number">0.1922</span>]]]]), Parameter containing:</span><br><span class="line">tensor([-<span class="number">0.2731</span>])], <span class="string">&#x27;lr&#x27;</span>: <span class="number">0.1</span>, <span class="string">&#x27;betas&#x27;</span>: (<span class="number">0.9</span>, <span class="number">0.999</span>), <span class="string">&#x27;eps&#x27;</span>: <span class="number">1e-08</span>, <span class="string">&#x27;weight_decay&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;amsgrad&#x27;</span>: <span class="literal">False</span>&#125;</span><br><span class="line">______</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">optimizer.state_dict()</span><br><span class="line">&#123;<span class="string">&#x27;state&#x27;</span>: &#123;&#125;,</span><br><span class="line"> <span class="string">&#x27;param_groups&#x27;</span>: [&#123;<span class="string">&#x27;lr&#x27;</span>: <span class="number">0.4</span>,</span><br><span class="line">   <span class="string">&#x27;betas&#x27;</span>: (<span class="number">0.9</span>, <span class="number">0.999</span>),</span><br><span class="line">   <span class="string">&#x27;eps&#x27;</span>: <span class="number">1e-08</span>,</span><br><span class="line">   <span class="string">&#x27;weight_decay&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">   <span class="string">&#x27;amsgrad&#x27;</span>: <span class="literal">False</span>,</span><br><span class="line">   <span class="string">&#x27;params&#x27;</span>: [<span class="number">140617843939944</span>, <span class="number">140617843755120</span>]&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;lr&#x27;</span>: <span class="number">0.1</span>,</span><br><span class="line">   <span class="string">&#x27;betas&#x27;</span>: (<span class="number">0.9</span>, <span class="number">0.999</span>),</span><br><span class="line">   <span class="string">&#x27;eps&#x27;</span>: <span class="number">1e-08</span>,</span><br><span class="line">   <span class="string">&#x27;weight_decay&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">   <span class="string">&#x27;amsgrad&#x27;</span>: <span class="literal">False</span>,</span><br><span class="line">   <span class="string">&#x27;params&#x27;</span>: [<span class="number">140617843755192</span>,</span><br><span class="line">    <span class="number">140617843755264</span>,</span><br><span class="line">    <span class="number">140617843755336</span>,</span><br><span class="line">    <span class="number">140617843755408</span>]&#125;]&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三种</span></span><br><span class="line">optimizer = t.optim.Adam([&#123;<span class="string">&#x27;params&#x27;</span>:model.net1.parameters(),<span class="string">&#x27;lr&#x27;</span>:<span class="number">0.4</span>&#125;])</span><br><span class="line">optimizer.add_param_group(&#123;<span class="string">&#x27;params&#x27;</span>:model.net2.parameters(),<span class="string">&#x27;lr&#x27;</span>:<span class="number">0.3</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第四种</span></span><br><span class="line"><span class="keyword">for</span> param_group <span class="keyword">in</span> optimizer.param_groups:</span><br><span class="line">     param_group[<span class="string">&#x27;lr&#x27;</span>]=lr_new</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="模型保存"><a href="#模型保存" class="headerlink" title="模型保存"></a>模型保存</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 只保留模型参数并且加载</span></span><br><span class="line">t.save(model.state_dict(),<span class="string">&#x27;model_state_dict&#x27;</span>)</span><br><span class="line">model.state_dict()</span><br><span class="line"></span><br><span class="line">OrderedDict([(<span class="string">&#x27;net1.weight&#x27;</span>, tensor([[[[-<span class="number">0.3164</span>, -<span class="number">0.2508</span>, -<span class="number">0.3294</span>],</span><br><span class="line">                        [ <span class="number">0.2388</span>, -<span class="number">0.1582</span>,  <span class="number">0.0678</span>],</span><br><span class="line">                        [ <span class="number">0.0194</span>,  <span class="number">0.1120</span>,  <span class="number">0.2794</span>]]],</span><br><span class="line">              </span><br><span class="line">              </span><br><span class="line">                      [[[-<span class="number">0.2425</span>,  <span class="number">0.0833</span>, -<span class="number">0.0842</span>],</span><br><span class="line">                        [ <span class="number">0.0687</span>, -<span class="number">0.0637</span>, -<span class="number">0.3034</span>],</span><br><span class="line">                        [-<span class="number">0.3268</span>, -<span class="number">0.1049</span>, -<span class="number">0.0286</span>]]]])),</span><br><span class="line">             (<span class="string">&#x27;net1.bias&#x27;</span>, tensor([ <span class="number">0.2742</span>,  <span class="number">0.2194</span>])),</span><br><span class="line">             (<span class="string">&#x27;net2.weight&#x27;</span>, tensor([[[[ <span class="number">0.2241</span>,  <span class="number">0.2280</span>, -<span class="number">0.0597</span>],</span><br><span class="line">                        [-<span class="number">0.1045</span>, -<span class="number">0.1610</span>,  <span class="number">0.0445</span>],</span><br><span class="line">                        [-<span class="number">0.1772</span>, -<span class="number">0.0639</span>, -<span class="number">0.0172</span>]],</span><br><span class="line">              </span><br><span class="line">                       [[ <span class="number">0.0975</span>, -<span class="number">0.0081</span>,  <span class="number">0.0690</span>],</span><br><span class="line">                        [-<span class="number">0.1273</span>,  <span class="number">0.0693</span>,  <span class="number">0.1792</span>],</span><br><span class="line">                        [ <span class="number">0.0773</span>,  <span class="number">0.1652</span>, -<span class="number">0.1688</span>]]],</span><br><span class="line">              </span><br><span class="line">              </span><br><span class="line">                      [[[-<span class="number">0.2314</span>,  <span class="number">0.0494</span>, -<span class="number">0.0648</span>],</span><br><span class="line">                        [-<span class="number">0.1919</span>,  <span class="number">0.2145</span>,  <span class="number">0.0369</span>],</span><br><span class="line">                        [-<span class="number">0.1336</span>, -<span class="number">0.1077</span>, -<span class="number">0.0743</span>]],</span><br><span class="line">              </span><br><span class="line">                       [[ <span class="number">0.1510</span>, -<span class="number">0.0868</span>, -<span class="number">0.1766</span>],</span><br><span class="line">                        [-<span class="number">0.1764</span>,  <span class="number">0.0398</span>,  <span class="number">0.2146</span>],</span><br><span class="line">                        [-<span class="number">0.0269</span>,  <span class="number">0.1241</span>, -<span class="number">0.2304</span>]]]])),</span><br><span class="line">             (<span class="string">&#x27;net2.bias&#x27;</span>, tensor(<span class="number">1.00000e-02</span> *</span><br><span class="line">                     [-<span class="number">7.3981</span>, -<span class="number">0.8345</span>]))])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">temp = t.load(<span class="string">&#x27;model_state_dict.pth&#x27;</span>)</span><br><span class="line">OrderedDict([(<span class="string">&#x27;net1.weight&#x27;</span>, tensor([[[[-<span class="number">0.3164</span>, -<span class="number">0.2508</span>, -<span class="number">0.3294</span>],</span><br><span class="line">                        [ <span class="number">0.2388</span>, -<span class="number">0.1582</span>,  <span class="number">0.0678</span>],</span><br><span class="line">                        [ <span class="number">0.0194</span>,  <span class="number">0.1120</span>,  <span class="number">0.2794</span>]]],</span><br><span class="line">              </span><br><span class="line">              </span><br><span class="line">                      [[[-<span class="number">0.2425</span>,  <span class="number">0.0833</span>, -<span class="number">0.0842</span>],</span><br><span class="line">                        [ <span class="number">0.0687</span>, -<span class="number">0.0637</span>, -<span class="number">0.3034</span>],</span><br><span class="line">                        [-<span class="number">0.3268</span>, -<span class="number">0.1049</span>, -<span class="number">0.0286</span>]]]])),</span><br><span class="line">             (<span class="string">&#x27;net1.bias&#x27;</span>, tensor([ <span class="number">0.2742</span>,  <span class="number">0.2194</span>])),</span><br><span class="line">             (<span class="string">&#x27;net2.weight&#x27;</span>, tensor([[[[ <span class="number">0.2241</span>,  <span class="number">0.2280</span>, -<span class="number">0.0597</span>],</span><br><span class="line">                        [-<span class="number">0.1045</span>, -<span class="number">0.1610</span>,  <span class="number">0.0445</span>],</span><br><span class="line">                        [-<span class="number">0.1772</span>, -<span class="number">0.0639</span>, -<span class="number">0.0172</span>]],</span><br><span class="line">              </span><br><span class="line">                       [[ <span class="number">0.0975</span>, -<span class="number">0.0081</span>,  <span class="number">0.0690</span>],</span><br><span class="line">                        [-<span class="number">0.1273</span>,  <span class="number">0.0693</span>,  <span class="number">0.1792</span>],</span><br><span class="line">                        [ <span class="number">0.0773</span>,  <span class="number">0.1652</span>, -<span class="number">0.1688</span>]]],</span><br><span class="line">              </span><br><span class="line">              </span><br><span class="line">                      [[[-<span class="number">0.2314</span>,  <span class="number">0.0494</span>, -<span class="number">0.0648</span>],</span><br><span class="line">                        [-<span class="number">0.1919</span>,  <span class="number">0.2145</span>,  <span class="number">0.0369</span>],</span><br><span class="line">                        [-<span class="number">0.1336</span>, -<span class="number">0.1077</span>, -<span class="number">0.0743</span>]],</span><br><span class="line">              </span><br><span class="line">                       [[ <span class="number">0.1510</span>, -<span class="number">0.0868</span>, -<span class="number">0.1766</span>],</span><br><span class="line">                        [-<span class="number">0.1764</span>,  <span class="number">0.0398</span>,  <span class="number">0.2146</span>],</span><br><span class="line">                        [-<span class="number">0.0269</span>,  <span class="number">0.1241</span>, -<span class="number">0.2304</span>]]]])),</span><br><span class="line">             (<span class="string">&#x27;net2.bias&#x27;</span>, tensor(<span class="number">1.00000e-02</span> *</span><br><span class="line">                     [-<span class="number">7.3981</span>, -<span class="number">0.8345</span>]))])</span><br><span class="line"></span><br><span class="line">model2.state_dict()</span><br><span class="line"></span><br><span class="line">OrderedDict([(<span class="string">&#x27;net3.weight&#x27;</span>, tensor([[[[ <span class="number">0.2793</span>, -<span class="number">0.2330</span>,  <span class="number">0.3270</span>],</span><br><span class="line">                        [-<span class="number">0.1419</span>,  <span class="number">0.1562</span>,  <span class="number">0.1875</span>],</span><br><span class="line">                        [-<span class="number">0.0249</span>,  <span class="number">0.1297</span>,  <span class="number">0.1642</span>]]],</span><br><span class="line">              </span><br><span class="line">              </span><br><span class="line">                      [[[ <span class="number">0.2770</span>,  <span class="number">0.1016</span>, -<span class="number">0.1096</span>],</span><br><span class="line">                        [ <span class="number">0.1929</span>,  <span class="number">0.0210</span>,  <span class="number">0.1722</span>],</span><br><span class="line">                        [ <span class="number">0.1304</span>,  <span class="number">0.0820</span>,  <span class="number">0.1205</span>]]]])),</span><br><span class="line">             (<span class="string">&#x27;net3.bias&#x27;</span>, tensor([-<span class="number">0.3235</span>, -<span class="number">0.1770</span>])),</span><br><span class="line">             (<span class="string">&#x27;net4.weight&#x27;</span>, tensor([[[[-<span class="number">0.2043</span>, -<span class="number">0.1492</span>],</span><br><span class="line">                        [ <span class="number">0.1728</span>, -<span class="number">0.1069</span>]],</span><br><span class="line">              </span><br><span class="line">                       [[-<span class="number">0.2903</span>,  <span class="number">0.3385</span>],</span><br><span class="line">                        [ <span class="number">0.2778</span>,  <span class="number">0.1589</span>]]],</span><br><span class="line">              </span><br><span class="line">              </span><br><span class="line">                      [[[-<span class="number">0.1423</span>, -<span class="number">0.0439</span>],</span><br><span class="line">                        [ <span class="number">0.2849</span>, -<span class="number">0.0840</span>]],</span><br><span class="line">              </span><br><span class="line">                       [[ <span class="number">0.0354</span>,  <span class="number">0.1711</span>],</span><br><span class="line">                        [-<span class="number">0.0274</span>, -<span class="number">0.2220</span>]]]])),</span><br><span class="line">             (<span class="string">&#x27;net4.bias&#x27;</span>, tensor([-<span class="number">0.0264</span>, -<span class="number">0.1094</span>]))])</span><br><span class="line"></span><br><span class="line">model2.load_state_dict(temp)</span><br><span class="line"></span><br><span class="line">Missing key(s) <span class="keyword">in</span> state_dict: <span class="string">&quot;net3.weight&quot;</span>, <span class="string">&quot;net3.bias&quot;</span>, <span class="string">&quot;net4.weight&quot;</span>, <span class="string">&quot;net4.bias&quot;</span>. </span><br><span class="line">	Unexpected key(s) <span class="keyword">in</span> state_dict: <span class="string">&quot;net1.weight&quot;</span>, <span class="string">&quot;net1.bias&quot;</span>, <span class="string">&quot;net2.weight&quot;</span>, <span class="string">&quot;net2.bias&quot;</span>.</span><br><span class="line">        </span><br><span class="line"><span class="comment"># 印证了在保存模型参数的时候是根据名字进行保存，</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保留模型</span></span><br><span class="line">t.save(model,<span class="string">&#x27;model.pth&#x27;</span>)</span><br><span class="line">temp2 = t.load(<span class="string">&#x27;model.pth&#x27;</span>)</span><br><span class="line">Nettest(</span><br><span class="line">  (net1): Conv2d(<span class="number">1</span>, <span class="number">2</span>, kernel_size=(<span class="number">3</span>, <span class="number">3</span>), stride=(<span class="number">1</span>, <span class="number">1</span>), padding=(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">  (net2): Sequential(</span><br><span class="line">    (<span class="number">0</span>): Conv2d(<span class="number">2</span>, <span class="number">2</span>, kernel_size=(<span class="number">3</span>, <span class="number">3</span>), stride=(<span class="number">1</span>, <span class="number">1</span>), padding=(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">    (<span class="number">1</span>): Conv2d(<span class="number">1</span>, <span class="number">1</span>, kernel_size=(<span class="number">3</span>, <span class="number">3</span>), stride=(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">加载进来就是一个模型，包括forward什么的都还在。</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="numpy和list和tensor对于size的访问区别"><a href="#numpy和list和tensor对于size的访问区别" class="headerlink" title="numpy和list和tensor对于size的访问区别"></a>numpy和list和tensor对于size的访问区别</h2><ol>
<li>list:   只有len()方法，返回的是最外层的个数，reshape方法</li>
<li>numpy:  b.size是全部个数，b.shape是(2,3)  b &#x3D; np.arange(6).reshape(2,3),  b.resize(2,3)        np.arange(1,6,2)</li>
<li>tensor: c.shape&#x3D;&#x3D;c.size()  len(c)&#x3D;&#x3D;c.size(0) 返回torch.size([3,2]), c.resize_(4,4)(可以改变自身尺寸)  c.resize(1,4)（来源于torchvision，可以忽略）&#x3D;&#x3D;c.reshape(1,4)(对于连续地址共享内存，不连续地址则复制)&#x3D;&#x3D;c.view(1,4)(共享内存)  t.arange(1,6,2) t_.unsqueeze(1)<br>tensor的普通索引基本共享内存，而高级索引基本不共享内存。 </li>
<li>numpy–&gt;tensor t_ &#x3D; t.from_numpy(numpy_)(共享内存）或者 t_ &#x3D; t.tensor(numpy_)(返回新对象)</li>
<li>tensor–&gt;numpy np_ &#x3D; t_.numpy()(共享内存) 或者 np_ &#x3D; np.array(t_)</li>
<li>numpy–&gt;list   list_ &#x3D; np_.tolist()(不共享内存）</li>
<li>list–&gt;numpy   np_ &#x3D; np.array(list_)(不共享内存）</li>
<li>tensor–&gt;list  list_ &#x3D; t_.tolist() (不共享内存)  或者 item_ &#x3D; t_.item() (不共享内存）</li>
<li>list–&gt;tensor  t_ &#x3D; t.tensor(list_)(不共享内存）<br>也就是说numpy和tensor可以做到互相共享内存，而list只是一个对外的和Python相连接的一个形式.<br>补充：基于numpy和tensor，推荐使用shape属性， 修改形状则分别使用reshape()和view(),</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> torch <span class="keyword">as</span> t</span><br><span class="line"></span><br><span class="line"><span class="comment"># a,b,c共享内存</span></span><br><span class="line">a = np.ones([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">b = t.from_numpy(a)</span><br><span class="line">c = b.numpy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># a,b,c不共享内存</span></span><br><span class="line">a = np.ones([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">b = t.tensor(a)</span><br><span class="line">c = np.array(b)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 不共享内存</span></span><br><span class="line">a = np.ones([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">b = a.tolist()</span><br><span class="line">c = np.array(b)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tensor <span class="keyword">as</span> t</span><br><span class="line">a = t.tensor([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">b = a.item()</span><br><span class="line">b = a.tolist()</span><br><span class="line">c = t.tensor(b)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="torch-Tensor-和-torch-tensor的区别"><a href="#torch-Tensor-和-torch-tensor的区别" class="headerlink" title="torch.Tensor 和 torch.tensor的区别"></a>torch.Tensor 和 torch.tensor的区别</h2><p>暂时还没有组织好的语言，先以代码的形式记录下来<br>主要是类型和对0维元素的区别。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">12</span>]: <span class="keyword">import</span> torch <span class="keyword">as</span> t</span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: t.Tensor(<span class="number">3</span>)</span><br><span class="line">Out[<span class="number">13</span>]: tensor([-<span class="number">4.8232e+13</span>,  <span class="number">4.5581e-41</span>, -<span class="number">1.8931e-03</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: t.Tensor([<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">Out[<span class="number">14</span>]: tensor([ <span class="number">3.</span>,  <span class="number">4.</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: t.tensor(<span class="number">3</span>)</span><br><span class="line">Out[<span class="number">15</span>]: tensor(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: t.tensor([<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">Out[<span class="number">16</span>]: tensor([ <span class="number">3</span>,  <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]: a = t.tensor([<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">18</span>]: <span class="built_in">type</span>(a)</span><br><span class="line">Out[<span class="number">18</span>]: torch.Tensor</span><br><span class="line"></span><br><span class="line">In [<span class="number">19</span>]: a.dtype</span><br><span class="line">Out[<span class="number">19</span>]: torch.int64</span><br><span class="line"></span><br><span class="line"><span class="comment"># Tensor只是tensor(dtype=float)的别名。</span></span><br><span class="line">x = torch.tensor([<span class="number">3.0</span>],requires_grad=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># torch.Tensor不接收requires_grad参数</span></span><br><span class="line"><span class="comment"># torch.tensor只有是float型参数的情况下才接受requires_grad参数</span></span><br></pre></td></tr></table></figure>

<h2 id="tensor-new-和tensor-data-new"><a href="#tensor-new-和tensor-data-new" class="headerlink" title="tensor.new()和tensor.data.new()"></a>tensor.new()和tensor.data.new()</h2><p>暂时不知道这两者的区别，但是书上的代码多数都是tensor.data.new()</p>
<hr>
<h2 id="topk的用法"><a href="#topk的用法" class="headerlink" title="topk的用法"></a>topk的用法</h2><p>output.data[0].topk(1)[1][0].item()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">20</span>]: x = t.arange(<span class="number">1</span>,<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">21</span>]: y = t.topk(x,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">22</span>]: <span class="built_in">type</span>(y)</span><br><span class="line">Out[<span class="number">22</span>]: <span class="built_in">tuple</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">23</span>]: y</span><br><span class="line">Out[<span class="number">23</span>]: (tensor([ <span class="number">5.</span>,  <span class="number">4.</span>]), tensor([ <span class="number">4</span>,  <span class="number">3</span>]))</span><br><span class="line"></span><br><span class="line">In [<span class="number">24</span>]: y[<span class="number">1</span>]</span><br><span class="line">Out[<span class="number">24</span>]: tensor([ <span class="number">4</span>,  <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">25</span>]: y[<span class="number">1</span>][<span class="number">1</span>]</span><br><span class="line">Out[<span class="number">25</span>]: tensor(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">26</span>]: y[<span class="number">1</span>][<span class="number">1</span>].item()</span><br><span class="line">Out[<span class="number">26</span>]: <span class="number">3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ipython和jupyter和pycharm"><a href="#ipython和jupyter和pycharm" class="headerlink" title="ipython和jupyter和pycharm"></a>ipython和jupyter和pycharm</h2><p>在写代码的前期，用jupyter好使，因为对于不确定的比较多的代码是可以直接看到结果，对某一段进行调试，检查某一段的基本语法错误，或者对于某个想法的实现，是简单直接的甚至对于中型代码，用代码框可以实现视觉上的分离，逻辑清晰，并且支持markdown的记录与注释，对于不了解的代码有很好的支持性。<br>但是在写代码的后期，jupyter的弊端逐渐显现，不能使用模板，<strong>init</strong>.py的生成不好使，文件与文件夹的关系不清晰。甚至一个简单的文件或者文件夹挪动位置都很麻烦，需要桌面的辅助。<br>而pycharm对于文件管理，<strong>init</strong>.py等有很好的支持性。更适合写已经成熟的代码。<br>这一下难住我了，作为新手，肯定每次都要实验好些代码，看输入输出的效果，如果是pycharm则比较麻烦，对于调试很啰嗦。<br>命令行窗口做为补充，也不好使，因为每次能看到的东西有限，重复性差，只能用于单句代码的验证。<br>所以不妨这样，前期开发还是用jupyter，等开发的差不多了，甚至等单个文件已经开发完毕，这样的话开发就可以先不管文件夹的事，等各个文件开发完毕，再转成pycharm，来实现文件夹、文件的组织管理和后期的调试，这是因为现在多数不使用jupyter直接运行，而是使用py进行运行。我觉得应该有很多人用.ipynb进行运行，但是我不知道怎么才能更好的运行。</p>
<h3 id="anaconda"><a href="#anaconda" class="headerlink" title="anaconda"></a>anaconda</h3><p>虚拟环境不错</p>
<h3 id="python"><a href="#python" class="headerlink" title="python"></a>python</h3><p>如果在 Python 脚本文件首行输入#!&#x2F;usr&#x2F;bin&#x2F;env python，那么可以在命令行窗口中执行&#x2F;path&#x2F;to&#x2F;script-file.py以执行该脚本文件。<br>使用三引号(‘’’或”””)可以指定一个多行字符串。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/09/23/pytorch-chapter9-CharRNN/" data-id="cla55fgeb009qwka73e977v17" data-title="pytorch chapter9 CharRNN" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/numpy/" rel="tag">numpy</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/09/24/CMC/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          CMC
        
      </div>
    </a>
  
  
    <a href="/2018/09/13/numpy/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">numpy</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/408/">408</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">计算机组成原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/408/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/DeepLearning/">DeepLearning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/GAN/">GAN</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/GPU/">GPU</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Markdown/">Markdown</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/VOS/">VOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/attention/">attention</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cuda/">cuda</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/deep-learning/">deep learning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/deep-learning/">deep-learning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/face-recognition/">face recognition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/github-markdown/">github-markdown</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/html/">html</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ind1/">ind1</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/markdown/">markdown</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/object-detection/">object detection</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/paper/">paper</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/person-re-id/">person re-id</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/person-reid/">person-reid</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/preson-re-id/">preson re-id</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/pytorch/">pytorch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/re-ID/">re-ID</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/re-id/">re-id</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/segmentation/">segmentation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/semantice-segmentation/">semantice segmentation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tensorboard/">tensorboard</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tensorflow/">tensorflow</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/unsupervised-video-object-segmentation/">unsupervised video object segmentation</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/unsupervised-video-object-segmentation/VOS/">VOS</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%B9%E5%99%A8/">容器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">搭建博客</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/408/">408</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/408/" rel="tag">408</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CMC/" rel="tag">CMC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CNN/" rel="tag">CNN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GAN/" rel="tag">GAN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Grad-CAM/" rel="tag">Grad-CAM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RotationNet/" rel="tag">RotationNet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SE/" rel="tag">SE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPGAN/" rel="tag">SPGAN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VOS/" rel="tag">VOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/a/" rel="tag">a</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/attention/" rel="tag">attention</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/b/" rel="tag">b</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cross-domain/" rel="tag">cross domain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cross-domain-person-re-id/" rel="tag">cross-domain person re-id</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cuda/" rel="tag">cuda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cudnn/" rel="tag">cudnn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cycleGAN/" rel="tag">cycleGAN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data/" rel="tag">data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data-VOS/" rel="tag">data_VOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deep-learning/" rel="tag">deep-learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/domain-adaption/" rel="tag">domain adaption</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/domain-guided-distillation/" rel="tag">domain guided distillation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/driver/" rel="tag">driver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/face-recognition/" rel="tag">face recognition</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/face-synthesis/" rel="tag">face synthesis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/few-shot/" rel="tag">few-shot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/few-shot-learning/" rel="tag">few-shot learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/" rel="tag">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mask-and-colour/" rel="tag">mask and colour</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/" rel="tag">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mathjax/" rel="tag">mathjax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/memory/" rel="tag">memory</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta-learning/" rel="tag">meta-learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multi-domain/" rel="tag">multi-domain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/" rel="tag">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/neural-style-transfer/" rel="tag">neural style transfer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/numpy/" rel="tag">numpy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/object-detection/" rel="tag">object detection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/one-example/" rel="tag">one_example</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paper/" rel="tag">paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/person-re-id/" rel="tag">person re-id</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/person-re-identification/" rel="tag">person re-identification</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/person-reid/" rel="tag">person-reid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-picture/" rel="tag">python,picture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pytorch/" rel="tag">pytorch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pytorch-learn-chenyun/" rel="tag">pytorch-learn chenyun</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/re-ID/" rel="tag">re-ID</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/re-id/" rel="tag">re-id</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/segmentation/" rel="tag">segmentation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/semantice-segmentation/" rel="tag">semantice segmentation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sharelatex/" rel="tag">sharelatex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/softmax/" rel="tag">softmax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/starGAN/" rel="tag">starGAN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tensorboard/" rel="tag">tensorboard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tensorflow/" rel="tag">tensorflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transfer-learning/" rel="tag">transfer learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%B7%E7%A7%AF-%E5%8F%8D%E5%8D%B7%E7%A7%AF-%E7%A9%BA%E6%B4%9E%E5%8D%B7%E7%A7%AF/" rel="tag">卷积\反卷积 空洞卷积</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%B9%E5%99%A8/" rel="tag">容器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">计算机操作系统</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/408/" style="font-size: 15px;">408</a> <a href="/tags/CMC/" style="font-size: 10px;">CMC</a> <a href="/tags/CNN/" style="font-size: 10px;">CNN</a> <a href="/tags/GAN/" style="font-size: 20px;">GAN</a> <a href="/tags/Grad-CAM/" style="font-size: 10px;">Grad-CAM</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/RotationNet/" style="font-size: 10px;">RotationNet</a> <a href="/tags/SE/" style="font-size: 10px;">SE</a> <a href="/tags/SPGAN/" style="font-size: 10px;">SPGAN</a> <a href="/tags/VOS/" style="font-size: 10px;">VOS</a> <a href="/tags/a/" style="font-size: 10px;">a</a> <a href="/tags/attention/" style="font-size: 13.33px;">attention</a> <a href="/tags/b/" style="font-size: 10px;">b</a> <a href="/tags/cross-domain/" style="font-size: 10px;">cross domain</a> <a href="/tags/cross-domain-person-re-id/" style="font-size: 10px;">cross-domain person re-id</a> <a href="/tags/cuda/" style="font-size: 11.67px;">cuda</a> <a href="/tags/cudnn/" style="font-size: 10px;">cudnn</a> <a href="/tags/cycleGAN/" style="font-size: 10px;">cycleGAN</a> <a href="/tags/data/" style="font-size: 10px;">data</a> <a href="/tags/data-VOS/" style="font-size: 10px;">data_VOS</a> <a href="/tags/deep-learning/" style="font-size: 10px;">deep-learning</a> <a href="/tags/docker/" style="font-size: 11.67px;">docker</a> <a href="/tags/domain-adaption/" style="font-size: 10px;">domain adaption</a> <a href="/tags/domain-guided-distillation/" style="font-size: 10px;">domain guided distillation</a> <a href="/tags/driver/" style="font-size: 10px;">driver</a> <a href="/tags/face-recognition/" style="font-size: 10px;">face recognition</a> <a href="/tags/face-synthesis/" style="font-size: 10px;">face synthesis</a> <a href="/tags/few-shot/" style="font-size: 10px;">few-shot</a> <a href="/tags/few-shot-learning/" style="font-size: 10px;">few-shot learning</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/github/" style="font-size: 11.67px;">github</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/markdown/" style="font-size: 11.67px;">markdown</a> <a href="/tags/mask-and-colour/" style="font-size: 10px;">mask and colour</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mathjax/" style="font-size: 10px;">mathjax</a> <a href="/tags/memory/" style="font-size: 11.67px;">memory</a> <a href="/tags/meta-learning/" style="font-size: 10px;">meta-learning</a> <a href="/tags/multi-domain/" style="font-size: 10px;">multi-domain</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/neural-style-transfer/" style="font-size: 10px;">neural style transfer</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/numpy/" style="font-size: 11.67px;">numpy</a> <a href="/tags/object-detection/" style="font-size: 10px;">object detection</a> <a href="/tags/one-example/" style="font-size: 10px;">one_example</a> <a href="/tags/paper/" style="font-size: 15px;">paper</a> <a href="/tags/person-re-id/" style="font-size: 18.33px;">person re-id</a> <a href="/tags/person-re-identification/" style="font-size: 10px;">person re-identification</a> <a href="/tags/person-reid/" style="font-size: 11.67px;">person-reid</a> <a href="/tags/python/" style="font-size: 13.33px;">python</a> <a href="/tags/python-picture/" style="font-size: 10px;">python,picture</a> <a href="/tags/pytorch/" style="font-size: 16.67px;">pytorch</a> <a href="/tags/pytorch-learn-chenyun/" style="font-size: 10px;">pytorch-learn chenyun</a> <a href="/tags/re-ID/" style="font-size: 10px;">re-ID</a> <a href="/tags/re-id/" style="font-size: 11.67px;">re-id</a> <a href="/tags/segmentation/" style="font-size: 10px;">segmentation</a> <a href="/tags/semantice-segmentation/" style="font-size: 10px;">semantice segmentation</a> <a href="/tags/sharelatex/" style="font-size: 10px;">sharelatex</a> <a href="/tags/softmax/" style="font-size: 10px;">softmax</a> <a href="/tags/starGAN/" style="font-size: 10px;">starGAN</a> <a href="/tags/tensorboard/" style="font-size: 10px;">tensorboard</a> <a href="/tags/tensorflow/" style="font-size: 13.33px;">tensorflow</a> <a href="/tags/transfer-learning/" style="font-size: 10px;">transfer learning</a> <a href="/tags/%E5%8D%B7%E7%A7%AF-%E5%8F%8D%E5%8D%B7%E7%A7%AF-%E7%A9%BA%E6%B4%9E%E5%8D%B7%E7%A7%AF/" style="font-size: 10px;">卷积\反卷积 空洞卷积</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">基础</a> <a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 10px;">容器</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 10px;">计算机操作系统</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/11/06/test-2011-11-06/">test_2011_11_06</a>
          </li>
        
          <li>
            <a href="/2020/09/23/python-100-days/">python_100_days</a>
          </li>
        
          <li>
            <a href="/2020/09/22/data-VOS/">data_VOS</a>
          </li>
        
          <li>
            <a href="/2020/09/22/TVOS/">TVOS</a>
          </li>
        
          <li>
            <a href="/2020/09/22/computer_system/">计算机组成原理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>